<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Game lobby</title>
    <style type="text/css">
        #roomsBox .room {
            background-color:white;
            border-radius:5px;
            border:1px solid #000;
            height: 200px;
            width: 200px;
            overflow: auto;
            cursor: pointer;
        }
    </style>
    <script type="application/javascript">
        function loadRooms() {
            const ws = new WebSocket('ws://localhost:3000/lobby');

            ws.onopen = function () {
                console.log(`[CLIENT] open()`);
            };

            ws.onclose = function() {
                console.log('Connection was closed');
            };

            ws.onmessage = function (event) {
                const m = event.data;
                console.log(m);
                if (m == null || m == null || m.length == 0)
                    return;
                showRooms(JSON.parse(m));
            };
        }
        function showRooms(rooms) {
            const t = document.getElementById('roomsBox');
            let tr;
            for (let i = 0;i < rooms.length;i++) {
                const div = document.createElement('div');
                div.className = 'room';
                const span = document.createElement('span');
                span.innerHTML = rooms[i].roomType;
                div.appendChild(span);
                div.onclick = function() {
                    location.href = 'draw.html?roomId=' + rooms[i].roomId;
                };
                t.appendChild(div);
            }
        }
    </script>
</head>
<body onload="loadRooms();">
<div id="roomsBox">
</div>
</body>
</html>
